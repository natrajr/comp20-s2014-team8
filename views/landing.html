<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<link rel='stylesheet' type="text/css" href='../static/bootstrap.min.css'>
	
	
</head>

<body onload="initData()">
	<div class="container theme-showcase" role="main">
		<div class="jumbotron">
        	<h1 class="text-center">Welcome to CryptoTicker!</h1>
        	<p class="text-center">Up-to-Date Information on Bitcoins and Alternative Crypto Currencies. Explore exhange rates, currents events, and popular cryptocurrencies other than Bitcoin</p>
        
        	<p class="text-center">
        		<a class="btn btn-lg btn-success" href="./news.html" role="button">News</a>
        		<a class="btn btn-lg btn-success" href="./currency.html" role="button">Bitcoin Exchange Rates</a>
        		<a class="btn btn-lg btn-success" href="./market.html" role="button">Alternative Currencies</a>
        	</p>
        	
        	<h2 class="text-center"><a href="./currency.html">Bitcoin Price Index</a></h2>
   	
   			<div class="text-center">
   				<ul class= "list-unstyled" id="BPI-list">
  				</ul>
  			</div>
    	</div>
    </div>
</body>

</html>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>

<script type="text/javascript">
	var xml;
	var currencyData={};

	function initData() {
		if (localStorage.length==0) {
			xml= new XMLHttpRequest();
			xml.open("GET", "http://api.coindesk.com/v1/bpi/currentprice.json", true);
			xml.send(null);
			xml.onreadystatechange= callback;
		}
		else {
			for (keys in localStorage) {
				$("#BPI-list").append("<strong><li>"+keys+localStorage[keys]+"</li></strong>");
			}
		}
	}
	function callback() {
		if (xml.readyState==4 && xml.status==200) {
			currencyData=JSON.parse(xml.responseText);
			displayBPI();
		}
	}
	
	function displayBPI() {
		for (var keys in currencyData["bpi"]) {
			$("#BPI-list").append("<strong><li>"+currencyData["bpi"][keys]["symbol"]+currencyData["bpi"][keys]["rate_float"]+ "</li></strong>");
			localStorage[currencyData["bpi"][keys]["symbol"]]=currencyData["bpi"][keys]["rate_float"];
		}
	}


</script>
